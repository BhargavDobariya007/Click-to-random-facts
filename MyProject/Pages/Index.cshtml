@page
@model IndexModel
@{
    ViewData["Title"] = "Home page";
}

<div class="text-center">
    <p>Project By -: Bhargav Dobariya <br>
       Class -: 5-B <br>
       enrollment NO. -: 202303103510459 <br>
    Click the button to get a random fact using a .NET Minimal API.</p>

    <button id="get-fact-btn" class="btn btn-primary btn-lg">Get New Fact</button>

    <hr />

    <blockquote class="mt-4">
        <h3 id="fact-text">Your fact will appear here...</h3>
    </blockquote>
</div>

@section Scripts {
    <script>
        document.addEventListener("DOMContentLoaded", () => {

            const getFactButton = document.getElementById("get-fact-btn");
            const factText = document.getElementById("fact-text");

            getFactButton.addEventListener("click", async () => {

                factText.innerText = "Loading...";

                try {
                    const response = await fetch("/getfact");

                    const data = await response.json(); 

                    factText.innerText = data.fact; 

                } catch (error) {
                    console.error("Error fetching fact:", error);
                    factText.innerText = "Oops! Could not get a fact.";
                }
            });
        });
    </script>
}